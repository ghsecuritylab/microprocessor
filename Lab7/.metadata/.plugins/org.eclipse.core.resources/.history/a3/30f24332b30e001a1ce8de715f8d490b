#include "stm32l476xx.h"
#include "utils.h"


void SystemClock_Config();
void SysTick_Handler();

int main()
{
	SystemClock_Config();
	gpio_init();
	while (1)
	{
		SysTick->CTRL = (SysTick->CTRL & 0xFFFFFFFE) | ~(SysTick->CTRL & 0x00000001);
	}
}

void SystemClock_Config()
{
	RCC->CR|=0x100; //turn on HSI16
	RCC->CFGR |= 0x0000001; //for hsi16
	RCC->CFGR |= 0x0000080; //for prescaler 2
	SysTick->CTRL |= 0x00000004;
	SysTick->LOAD = 60000000;
	SysTick->VAL = 0;
	SysTick->CTRL |= 0x00000003;
}

void SysTick_Handler()
{
	GPIOA->ODR = (GPIOA->ODR & 0xFFFFFFDF) | ~(GPIOA->ODR & 0x00000020);
}
